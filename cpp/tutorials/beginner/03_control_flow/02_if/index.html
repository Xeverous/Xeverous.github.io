<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<!-- Enable responsiveness on mobile devices--><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<title>modern C++ by Xeverous - 02 - if</title>
<link rel="icon" href="favicon.png">
<!-- RSS --><link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../../atom.xml">
<!-- CSS --><link rel="stylesheet" href="../../../../../assets/css/styles.css">
<!-- JS --><script type="text/javascript" src="../../../../../assets/js/app.js" defer></script><!-- maybe later
	<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']]
    },
    showMathMenu: false,
    menuSettings: {
      zoom: "None",
      collapsible: false,
      autocollapse: false,
      explorer: false
    }
  });
        </script>
	<script type="text/javascript" async
		src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"
		async></script>
	-->
</head>
<body>
	<div class="layout">
 <nav class="sidebar"><ul>
<li class="sidebar-section">
			<ul>
<li><a href="../../../../../">HOME</a></li>
				<li><a href="../../../../../index/">INDEX</a></li>
			</ul>
</li>

			<li class="sidebar-section">
				<h4 class="sidebar-section-title">C++ tutorials</h4>
				<p class="sidebar-section-description">Learn C++ from begin() to the end() (and beyond) or use knowledge and experience gained in other languages in the accelerated tutorial.</p>

				<ul>
<li><a href="../../">beginner</a></li>
						<li><a href="../../../accelerated/">accelerated</a></li>
						<li><a href="../../../templates/">templates</a></li>
				</ul>
</li>
			<li class="sidebar-section">
				<h4 class="sidebar-section-title">C++ how-to</h4>
				<p class="sidebar-section-description">Common and specific tasks explained.</p>

				<ul>
<li><a href="../../../../stdlib/">standard library components</a></li>
				</ul>
</li>
			<li class="sidebar-section">
				<h4 class="sidebar-section-title">C++ utilities</h4>
				<p class="sidebar-section-description">Various metarials with concentrated information.</p>

				<ul>
<li><a href="../../../../utility/cheatsheets/">C++ cheatsheets</a></li>
						<li><a href="../../../../utility/cpp_faq/">C++ FAQ</a></li>
						<li><a href="../../../../utility/cpp_myths/">C++ myths</a></li>
						<li><a href="../../../../utility/glossary/">glossary</a></li>
						<li><a href="../../../../utility/">(all articles)</a></li>
				</ul>
</li>
			<li class="sidebar-section">
				<h4 class="sidebar-section-title">misc / meta</h4>
				<p class="sidebar-section-description">About this website and its authors.</p>

				<ul>
<li><a href="../../../../../about/">about</a></li>
						<li><a href="../../../../../meta/site_faq/">website FAQ</a></li>
						<li><a href="../../../../../meta/markdown_test/">Markdown test page</a></li>
						<li><a href="../../../../../meta/rest_test/">reStructuredText test page</a></li>
				</ul>
</li>
	</ul></nav><nav class="topbar"><ul class="menu">
<li class="button"><a href="../../../../../">HOME</a></li>
				<li class="button"><a href="../../../../../index/">INDEX</a></li>
				<li class="button"><a href="../../../../../faq/">FAQ</a></li>
				<li class="button"><a href="../../../../../about/">ABOUT</a></li>
				<li class="button menu-button">
					<div class="menu-icon">
						<div class="bar1"></div>
						<div class="bar2"></div>
						<div class="bar3"></div>
					</div>
				</li>
			</ul></nav><div class="main container">
				<nav class="breadcrumb"><ol>
<li><a href="../../../../../index/">index</a></li>
						<span>/</span>
							<li><a href="../../../../">C++</a></li>
							<span>/</span>
							<li><a href="../../../">tutorials</a></li>
							<span>/</span>
							<li><a href="../../">beginner</a></li>
							<span>/</span>
							<li><a href="../">03 - control flow</a></li>
							<span>/</span>
						<li>02 - if</li>
					</ol></nav><div class="content">
				<h1>02 - if</h1>				<!-- TODO explain std::cin before this lesson -->
<p>The simplest control flow keywords of them all - <code class="code custom-cpp"><span class="keyword">if</span></code>. It executes attached code only if the condition is <code class="code custom-cpp"><span class="keyword">true</span></code>.</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="pp-hash">#</span><span class="pp-directive">include</span> <span class="pp-header">&lt;iostream&gt;</span>

<span class="keyword">int</span> <span class="func-free">main</span>()
{
	<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="lit-str">"Enter a number: "</span>;
	<span class="keyword">int</span> <span class="var-local">x</span> = <span class="lit-num">0</span>;
	<span class="namespace">std</span>::<span class="var-global">cin</span> &gt;&gt; <span class="var-local">x</span>;

	<span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">2</span> == <span class="lit-num">0</span>)
	{
		<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is even (divisible by 2)<span class="esc-seq">\n</span>"</span>;
	}
}
</pre></td>
</tr></tbody></table>
<p>Comparisons naturally produce values of type <code class="code custom-cpp"><span class="keyword">bool</span></code> but the condition can be any expression that is or can be converted to a value of type <code class="code custom-cpp"><span class="keyword">bool</span></code>. <code class="code custom-cpp"><span class="keyword">if</span></code> works as an explicit convertion so objects which require explicit convertion will also work.</p>
<p>The negative branch can be introduced with <code class="code custom-cpp"><span class="keyword">else</span></code>:</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="pp-hash">#</span><span class="pp-directive">include</span> <span class="pp-header">&lt;iostream&gt;</span>

<span class="keyword">int</span> <span class="func-free">main</span>()
{
	<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="lit-str">"Enter a number: "</span>;
	<span class="keyword">int</span> <span class="var-local">x</span> = <span class="lit-num">0</span>;
	<span class="namespace">std</span>::<span class="var-global">cin</span> &gt;&gt; <span class="var-local">x</span>;

	<span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">2</span> == <span class="lit-num">0</span>)
	{
		<span class="com-single">// positive branch - executed only if condition is true
</span>		<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is even (divisible by 2)<span class="esc-seq">\n</span>"</span>;
	}
	<span class="keyword">else</span>
	{
		<span class="com-single">// negative branch - executed only if condition is false
</span>		<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is odd<span class="esc-seq">\n</span>"</span>;
	}
}
</pre></td>
</tr></tbody></table>
<!--  --><blockquote>
<p>What if I want only negative branch?</p>
</blockquote>
<p>Simply reverse the result. You can use <code class="docutils literal">!</code> to flip a boolean but often you can just modify the condition to produce reversed result:</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="com-single">// reverse result</span>
<span class="com-single">// use when the condition's code can not be easily modified</span>
<span class="keyword">if</span> (!(<span class="var-local">x</span> % <span class="lit-num">2</span> == <span class="lit-num">0</span>))

<span class="com-single">// modify condition</span>
<span class="com-single">// the preferred way - it results in simpler code</span>
<span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">2</span> != <span class="lit-num">0</span>)
</pre></td>
</tr></tbody></table>
<p>You can omit braces (<code class="docutils literal">{}</code>) if exactly one statement is used:</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">2</span> == <span class="lit-num">0</span>)
	<span class="namespace">std</span>::<span class="var-global">cout</span> <span class="oo">&lt;&lt;</span> <span class="var-local">x</span> <span class="oo">&lt;&lt;</span> <span class="lit-str">" is even (divisible by 2)<span class="esc-seq">\n</span>"</span>;
<span class="keyword">else</span>
	<span class="namespace">std</span>::<span class="var-global">cout</span> <span class="oo">&lt;&lt;</span> <span class="var-local">x</span> <span class="oo">&lt;&lt;</span> <span class="lit-str">" is odd<span class="esc-seq">\n</span>"</span>;
</pre></td>
</tr></tbody></table>
<aside class="admonition tip"><p class="admonition-title">tip</p>
<p>Be consistent with your choice for braces. If you do both positive and negative branch, either use braces for both or none.</p>
</aside><aside class="admonition tip"><p class="admonition-title">tip</p>
<p>If the code on any branch of <code class="code custom-cpp"><span class="keyword">if</span></code> has more than 1 line (e.g. very long statement that has been split to 2 lines or a 1-line statement + 1-line comment) <strong>always use braces, even if you can skip them</strong>. Reason: code readability. In other words, be consistent - apply braces to both branches or none.</p>
</aside><p>Some projects take the rule even further and always require braces, even for simplest and shortest 1-line statements - the argument for it is safety as braces prevent situations like this:</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="pp-hash">#</span><span class="pp-directive">include</span> <span class="pp-header">&lt;iostream&gt;</span>

<span class="keyword">int</span> <span class="func-free">main</span>()
{
	<span class="keyword">int</span> <span class="var-local">x</span> = <span class="lit-num">6</span>;

	<span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">2</span> == <span class="lit-num">0</span>)
		<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is even<span class="esc-seq">\n</span>"</span>;

		<span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">4</span> == <span class="lit-num">0</span>)
			<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is divisible by 4<span class="esc-seq">\n</span>"</span>;
	<span class="keyword">else</span>
		<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is odd<span class="esc-seq">\n</span>"</span>;
}
</pre></td>
</tr></tbody></table>
<p>The above program will print that <code class="code custom-cpp"><span class="var-local">x</span></code> is both even and odd. The problem is that code has been written assuming that the <code class="code custom-cpp"><span class="keyword">else</span></code> will attach to the first <code class="code custom-cpp"><span class="keyword">if</span></code> statement, but it attached to the second - formatting does not affect language grammar. Some compilers may print a warning that the code is misleadingly indented:</p>
<pre class="code ansi"><span class="ansi1">main.cpp:</span> In function ‘<span class="ansi1">int main()</span>’:
<span class="ansi1">main.cpp:7:2:</span> <span class="ansi1 ansi35">warning: </span>this ‘<span class="ansi1">if</span>’ clause does not guard... [<span class="ansi1 ansi35">-Wmisleading-indentation</span>]
  <span class="ansi1 ansi35">if</span> (x % 2 == 0)
  <span class="ansi1 ansi35">^~</span>
<span class="ansi1">main.cpp:10:3:</span> <span class="ansi1 ansi36">note: </span>...this statement, but the latter is misleadingly indented as if it were guarded by the ‘<span class="ansi1">if</span>’
   <span class="ansi1 ansi36">if</span> (x % 4 == 0)
   <span class="ansi1 ansi36">^~</span>
</pre>
<aside class="admonition tip"><p class="admonition-title">tip</p>
<p>If you nest <code class="code custom-cpp"><span class="keyword">if</span></code> statements, you can omit braces only on the deepest level.</p>
</aside><p>This is the minimum to make the code work and be consistent:</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="pp-hash">#</span><span class="pp-directive">include</span> <span class="pp-header">&lt;iostream&gt;</span>

<span class="keyword">int</span> <span class="func-free">main</span>()
{
	<span class="keyword">int</span> <span class="var-local">x</span> = <span class="lit-num">6</span>;

	<span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">2</span> == <span class="lit-num">0</span>)
	{
		<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is even<span class="esc-seq">\n</span>"</span>;

		<span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">4</span> == <span class="lit-num">0</span>)
			<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is divisible by 4<span class="esc-seq">\n</span>"</span>;
	}
	<span class="keyword">else</span>
	{
		<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is odd<span class="esc-seq">\n</span>"</span>;
	}
}
</pre></td>
</tr></tbody></table>
<p>Sometimes, thanks to many conditions your code might indent very deeply, like this (image shows PHP, not C++):</p>
<img alt="code Hadouken" src="https://i.imgur.com/BtjZedW.jpg"><p>There are ways to solve such problems. One of them does not require any additional features so I can present it to you now. If you have an if-else tree that nests only on one end like this:</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="pp-hash">#</span><span class="pp-directive">include</span> <span class="pp-header">&lt;iostream&gt;</span>

<span class="keyword">int</span> <span class="func-free">main</span>()
{
	<span class="keyword">int</span> <span class="var-local">x</span> = <span class="lit-num">6</span>;

	<span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">2</span> == <span class="lit-num">0</span>)
	{
		<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is divisible by 2<span class="esc-seq">\n</span>"</span>;
	}
	<span class="keyword">else</span>
	{
		<span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">3</span> == <span class="lit-num">0</span>)
		{
			<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is divisible by 3<span class="esc-seq">\n</span>"</span>;
		}
		<span class="keyword">else</span>
		{
			<span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">5</span> == <span class="lit-num">0</span>)
			{
				<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is divisible by 5<span class="esc-seq">\n</span>"</span>;
			}
			<span class="keyword">else</span>
			{
				<span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">7</span> == <span class="lit-num">0</span>)
				{
					<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is divisible by 7<span class="esc-seq">\n</span>"</span>;
				}
				<span class="keyword">else</span>
				{
					<span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">11</span> == <span class="lit-num">0</span>)
						<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is divisible by 11<span class="esc-seq">\n</span>"</span>;
				}
			}
		}
	}
}
</pre></td>
</tr></tbody></table>
<p>...then you can use the rule that allows a single statement without braces and format the code in a very compact way:</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="pp-hash">#</span><span class="pp-directive">include</span> <span class="pp-header">&lt;iostream&gt;</span>

<span class="keyword">int</span> <span class="func-free">main</span>()
{
	<span class="keyword">int</span> <span class="var-local">x</span> = <span class="lit-num">6</span>;

	<span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">2</span> == <span class="lit-num">0</span>)
		<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is divisible by 2<span class="esc-seq">\n</span>"</span>;
	<span class="keyword">else</span> <span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">3</span> == <span class="lit-num">0</span>)
		<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is divisible by 3<span class="esc-seq">\n</span>"</span>;
	<span class="keyword">else</span> <span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">5</span> == <span class="lit-num">0</span>)
		<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is divisible by 5<span class="esc-seq">\n</span>"</span>;
	<span class="keyword">else</span> <span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">7</span> == <span class="lit-num">0</span>)
		<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is divisible by 7<span class="esc-seq">\n</span>"</span>;
	<span class="keyword">else</span> <span class="keyword">if</span> (<span class="var-local">x</span> % <span class="lit-num">11</span> == <span class="lit-num">0</span>)
		<span class="namespace">std</span>::<span class="var-global">cout</span> &lt;&lt; <span class="var-local">x</span> &lt;&lt; <span class="lit-str">" is divisible by 11<span class="esc-seq">\n</span>"</span>;
}
</pre></td>
</tr></tbody></table>
<p>Here braces are not only ommited for print statements, but they are also ommited between <code class="code custom-cpp"><span class="keyword">else</span></code> and <code class="code custom-cpp"><span class="keyword">if</span></code> keywords.</p>
<section id="syntax-sugar"><h2>Syntax sugar</h2>
<p>Since C++17 it's possible to have an extra statement inside <code class="code custom-cpp"><span class="keyword">if</span></code>, before the condition. It's very useful if you need to perform extra work but also limit the scope of any extra objects:</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9
10
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="keyword">if</span> (<span class="keyword">int</span> <span class="var-local">x</span> = <span class="func">func</span>(); <span class="var-local">x</span> == <span class="lit-num">0</span> || <span class="var-local">x</span> == <span class="lit-num">1</span>)
{
	<span class="com-single">// do stuff...</span>
}
<span class="keyword">else</span>
{
	<span class="com-single">// do other stuff...</span>
}

<span class="com-single">// x does not exist in this scope</span>
</pre></td>
</tr></tbody></table>
<p>The code is equivalent to:</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></div></td>
<td class="code"><pre class="code custom-cpp">{
	<span class="keyword">int</span> <span class="var-local">x</span> = <span class="func">func</span>();

	<span class="keyword">if</span> (<span class="var-local">x</span> == <span class="lit-num">0</span> || <span class="var-local">x</span> == <span class="lit-num">1</span>)
	{
		<span class="com-single">// do stuff...</span>
	}
	<span class="keyword">else</span>
	{
		<span class="com-single">// do other stuff...</span>
	}
}
</pre></td>
</tr></tbody></table></section><section id="ternary-conditional"><h2>Ternary conditional</h2>
<p>There is a special ternary (arity of 3) operator that is similar to <code class="code custom-cpp"><span class="keyword">if</span></code> but it works on the expression level, not statement. This makes it possible to use it as a subexpression inside complex statements:</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="com-single">// () are necessary because ?: has normally lower priority than &lt;&lt;</span>
<span class="namespace">std</span>::<span class="var-global">cout</span> <span class="oo">&lt;&lt;</span> <span class="lit-str">"x is "</span> <span class="oo">&lt;&lt;</span> (<span class="var-local">x</span> % <span class="lit-num">2</span> == <span class="lit-num">0</span> ? <span class="lit-str">"even"</span> : <span class="lit-str">"odd"</span>) <span class="oo">&lt;&lt;</span> <span class="lit-str">"<span class="esc-seq">\n</span>"</span>;
</pre></td>
</tr></tbody></table>
<p>and to simply else-if code:</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="keyword">const</span> <span class="keyword">char</span> <span class="var-local">c</span> =
	  <span class="var-local">x</span> == <span class="lit-num">1</span> ? <span class="lit-chr">'a'</span>
	: <span class="var-local">x</span> == <span class="lit-num">2</span> ? <span class="lit-chr">'b'</span>
	: <span class="var-local">x</span> == <span class="lit-num">3</span> ? <span class="lit-chr">'c'</span>
	: <span class="var-local">x</span> == <span class="lit-num">4</span> ? <span class="lit-chr">'d'</span>
	: <span class="var-local">x</span> == <span class="lit-num">5</span> ? <span class="lit-chr">'e'</span>
	: <span class="lit-chr">'f'</span>;

<span class="com-single">// equivalent else-if code</span>
<span class="keyword">char</span> <span class="var-local">c</span>; <span class="com-single">// can't use const here</span>
     <span class="keyword">if</span> (<span class="var-local">x</span> == <span class="lit-num">1</span>) <span class="var-local">c</span> = <span class="lit-chr">'a'</span>;
<span class="keyword">else</span> <span class="keyword">if</span> (<span class="var-local">x</span> == <span class="lit-num">2</span>) <span class="var-local">c</span> = <span class="lit-chr">'b'</span>;
<span class="keyword">else</span> <span class="keyword">if</span> (<span class="var-local">x</span> == <span class="lit-num">3</span>) <span class="var-local">c</span> = <span class="lit-chr">'c'</span>;
<span class="keyword">else</span> <span class="keyword">if</span> (<span class="var-local">x</span> == <span class="lit-num">4</span>) <span class="var-local">c</span> = <span class="lit-chr">'d'</span>;
<span class="keyword">else</span> <span class="keyword">if</span> (<span class="var-local">x</span> == <span class="lit-num">5</span>) <span class="var-local">c</span> = <span class="lit-chr">'e'</span>;
<span class="keyword">else</span>             <span class="var-local">c</span> = <span class="lit-chr">'f'</span>;
</pre></td>
</tr></tbody></table>
<p>The <code class="docutils literal"><span class="pre">?:</span></code> operator must always have 2 branches. You can get very creative with its usage (it works as a functional subexpression, not as a full statement) (not only for assignments) but I advise you to not overuse it because (due to grammar and backwards compatibility) <a class="reference external" href="https://en.cppreference.com/w/cpp/language/operator_other#Conditional_operator">its evaluation rules</a> have gone extremely complex.</p>
</section><section id="advanced-example"><h2>Advanced example</h2>
<p>Sometimes it might not be obvious how large simplifications are possible. The example below has a space for multiple potential improvements.</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="keyword">if</span> (<span class="var-local">a</span> == <span class="func">f</span>(<span class="var-local">b</span>))
	<span class="var-local">x</span> = <span class="namespace">std</span>::<span class="func">make_pair</span>(<span class="keyword">true</span>, <span class="var-local">a</span>);
<span class="keyword">else</span>
	<span class="var-local">x</span> = <span class="namespace">std</span>::<span class="func">make_pair</span>(<span class="keyword">false</span>, <span class="func">f</span>(<span class="var-local">b</span>));
</pre></td>
</tr></tbody></table>
<p>Note that the result of the function is wanted in both branches - the first branch (before improvements) used a local variable to avoid duplicate function calls but this resulted in hiding of the redundancy.</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="keyword">int</span> <span class="var-local">r</span> = <span class="func">f</span>(<span class="var-local">b</span>);
<span class="var-local">x</span> = <span class="namespace">std</span>::<span class="func">make_pair</span>(<span class="var-local">a</span> == <span class="var-local">r</span>, <span class="var-local">r</span>);
</pre></td>
</tr></tbody></table></section><section id="exercise"><h2>Exercise</h2>
<section id="question-1"><h3>Question 1</h3>
<p>What's wrong with the following code?</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="keyword">if</span> (<span class="var-local">x</span> != <span class="lit-num">0</span>);
{
	<span class="com-single">// do stuff...</span>
}
<span class="keyword">else</span>
{
	<span class="com-single">// do other stuff...</span>
}
</pre></td>
</tr></tbody></table>
<div class="docutils container">
<details><summary>Answer</summary><div class="docutils container">
<p>There are 2 mistakes:</p>
<ul class="simple">
<li><p>There is <code class="docutils literal">;</code> immediately after the condition (null statement) which acts as the braceless one statement. It will prevent actually intended statements from happening and break the <code class="code custom-cpp"><span class="keyword">else</span></code> (either shifting it to a different <code class="code custom-cpp"><span class="keyword">if</span></code> or making a compiler error).</p></li>
<li><p>There are 2 branches but the condition contains a negation. It can be simplified by reversing the condition and swapping branch bodies:</p></li>
</ul>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="keyword">if</span> (<span class="var-local">x</span> == <span class="lit-num">0</span>)
{
	<span class="com-single">// do other stuff...</span>
}
<span class="keyword">else</span>
{
	<span class="com-single">// do stuff...</span>
}
</pre></td>
</tr></tbody></table>
</div>
</details>
</div>
</section><section id="question-2"><h3>Question 2</h3>
<p>What's wrong with the following code?</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="keyword">if</span> (<span class="var-local">x</span> = <span class="func">func</span>())
	<span class="namespace">std</span>::<span class="var-global">cout</span> <span class="oo">&lt;&lt;</span> <span class="lit-str">"x is non-zero<span class="esc-seq">\n</span>"</span>;
</pre></td>
</tr></tbody></table>
<div class="docutils container">
<details><summary>Answer</summary><div class="docutils container">
<p>The code uses <code class="docutils literal">=</code>, not <code class="docutils literal">==</code>. This will cause the assignment to take place and because assignment operator returns first operand (it's right-to-left associative) the <code class="code custom-cpp"><span class="keyword">if</span></code> statement will evaluate <code class="code custom-cpp"><span class="var-local">x</span></code> after the assignment (converting it to <code class="code custom-cpp"><span class="keyword">bool</span></code>). All major compilers should warn on this type of mistake.</p>
<!-- I have considered to mention Yoda conditions but IMO their benefits are too low. They are rarely used, compilers detect accidental = well and Yoda conditons don't even work for all cases - only when one of operands is read-only. -->
<p>If both the assignment and the test are desired, major compilers agreed on this solution:</p>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="com-single">// extra set of () indicates desirable assignment in subexpression</span>
<span class="keyword">if</span> ((<span class="var-local">x</span> = <span class="func">func</span>()))
	<span class="namespace">std</span>::<span class="var-global">cout</span> <span class="oo">&lt;&lt;</span> <span class="lit-str">"x is non-zero<span class="esc-seq">\n</span>"</span>;
</pre></td>
</tr></tbody></table>
</div>
</details>
</div>
<!--  -->
<blockquote>
<p>I don't get the <em>assignment operator returns first operand</em> part. What makes <code class="docutils literal">=</code> compile inside <code class="code custom-cpp"><span class="keyword">if</span></code>?</p>
</blockquote>
<p>You need to understand that <code class="code custom-cpp"><span class="keyword">if</span></code> does not see every entity inside the condition, it simply acts as a test of a value of type <code class="code custom-cpp"><span class="keyword">bool</span></code>. The whole condition expression is evaluated first and only then its result is brought to the <code class="code custom-cpp"><span class="keyword">if</span></code> logic. Why assignments <em>return</em> first operand as the result? This will get clearer once you get familiar with <em>functions</em> and the concept of <em>returning</em> a result - many parts of C++ work on the basis of functions and most operators (including <code class="docutils literal">=</code>) too.</p>
</section><section id="writing"><h3>Writing</h3>
<p>Write a simple pseudo-calculator program:</p>
<ul class="simple">
<li><p>The user should enter 2 numbers.</p></li>
<li><p>The user should enter extra number specifying operation to perform (addition, subtraction, multiplication, division, modulus).</p></li>
<li><p>The program should check validity of the operation (division and modulus by 0 have undefined behavior) and execute it if possible. Print the result.</p></li>
</ul></section></section>
</div>
 		<footer class="footer"><div class="footer-item footer-item-container">
				<div class="footer-flex-item">
					<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
						<img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>
					<br>
					All non-code content licensed under <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>, unless stated otherwise.
				</div>
				<div class="footer-flex-item">
					All code content (monospaced font) licensed under <a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">Creative Commons Zero License</a>, unless stated otherwise.
				</div>
			</div>
			<div class="footer-item footer-item-container">
				<div class="footer-flex-item">
					Generated using heavily customized <a href="https://getnikola.com">Nikola</a> static site generator.
				</div>
				<div class="footer-flex-item">
					<a href="https://github.com/Xeverous/the_website">website repository and issue tracker</a>
				</div>
			</div>
		</footer>
</div>
	</div>
</body>
</html>
