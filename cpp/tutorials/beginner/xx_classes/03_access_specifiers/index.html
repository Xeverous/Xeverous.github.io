<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<!-- Enable responsiveness on mobile devices--><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<title>modern C++ by Xeverous - 03 - access specifiers</title>
<link rel="icon" href="favicon.png">
<!-- RSS --><link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../../atom.xml">
<!-- CSS --><link rel="stylesheet" href="../../../../../assets/css/styles.css">
<!-- JS --><script type="text/javascript" src="../../../../../assets/js/app.js" defer></script><!-- maybe later
	<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']]
    },
    showMathMenu: false,
    menuSettings: {
      zoom: "None",
      collapsible: false,
      autocollapse: false,
      explorer: false
    }
  });
        </script>
	<script type="text/javascript" async
		src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"
		async></script>
	-->
</head>
<body>
	<div class="layout">
 <nav class="sidebar"><ul>
<li class="sidebar-section">
			<ul>
<li><a href="../../../../../">HOME</a></li>
				<li><a href="../../../../../index">INDEX</a></li>
			</ul>
</li>

			<li class="sidebar-section">
				<h4 class="sidebar-section-title">C++ tutorials</h4>
				<p class="sidebar-section-description">Learn C++ from begin() to the end() (and beyond) or use knowledge and experience gained in other languages in the accelerated tutorial.</p>

				<ul>
<li><a href="../../">beginner</a></li>
						<li><a href="../../../accelerated/">accelerated</a></li>
						<li><a href="../../../templates/">templates</a></li>
				</ul>
</li>
			<li class="sidebar-section">
				<h4 class="sidebar-section-title">C++ how-to</h4>
				<p class="sidebar-section-description">Common and specific tasks explained.</p>

				<ul>
<li><a href="../../../../stdlib/">standard library components</a></li>
				</ul>
</li>
			<li class="sidebar-section">
				<h4 class="sidebar-section-title">C++ utilities</h4>
				<p class="sidebar-section-description">Various metarials with concentrated information.</p>

				<ul>
<li><a href="../../../../utility/cheatsheets/">C++ cheatsheets</a></li>
						<li><a href="../../../../utility/cpp_faq/">C++ FAQ</a></li>
						<li><a href="../../../../utility/cpp_myths/">C++ myths</a></li>
						<li><a href="../../../../utility/glossary/">glossary</a></li>
						<li><a href="../../../../utility/">(all articles)</a></li>
				</ul>
</li>
			<li class="sidebar-section">
				<h4 class="sidebar-section-title">misc / meta</h4>
				<p class="sidebar-section-description">About this website and its authors.</p>

				<ul>
<li><a href="../../../../../about/">about</a></li>
						<li><a href="../../../../../meta/site_faq/">website FAQ</a></li>
						<li><a href="../../../../../meta/markdown_test/">Markdown test page</a></li>
						<li><a href="../../../../../meta/rest_test/">reStructuredText test page</a></li>
				</ul>
</li>
	</ul></nav><nav class="topbar"><ul class="menu">
<li class="button"><a href="../../../../../">HOME</a></li>
				<li class="button"><a href="../../../../../index">INDEX</a></li>
				<li class="button"><a href="../../../../../faq">FAQ</a></li>
				<li class="button"><a href="../../../../../about">ABOUT</a></li>
				<li class="button menu-button">
					<div class="menu-icon">
						<div class="bar1"></div>
						<div class="bar2"></div>
						<div class="bar3"></div>
					</div>
				</li>
			</ul></nav><div class="main container">
				<nav class="breadcrumb"><ol>
<li><a href="../../../../../index">index</a></li>
						<span>/</span>
							<li><a href="../../../../">C++</a></li>
							<span>/</span>
							<li><a href="../../../">tutorials</a></li>
							<span>/</span>
							<li><a href="../../">beginner</a></li>
							<span>/</span>
							<li><a href="../">xx - classes</a></li>
							<span>/</span>
						<li>03 - access specifiers</li>
					</ol></nav><div class="content">
				<h1>03 - access specifiers</h1>				<p>When browsing settings on an online account or government documents, you can sometimes find that some data is marked as <strong>public</strong> (everyone can see it) or as <strong>private</strong> (only you can see it). We limit access to certain data in order to prevent unauthorized people from accessing data they shouldn't need. An analogical mechanism exists in object-oriented programming: we limit access to class members in order to prevent unwanted code to accidentally interact (in a bad way) with class invariants.</p>
<p>There are 3 keywords which affect class member access:</p>
<ul class="simple">
<li><p><code class="code custom-cpp"><span class="keyword">public</span></code></p></li>
<li><p><code class="code custom-cpp"><span class="keyword">protected</span></code></p></li>
<li><p><code class="code custom-cpp"><span class="keyword">private</span></code></p></li>
</ul>
<p><code class="code custom-cpp"><span class="keyword">public</span></code> is something you already know. It places no restrictions and is the default access when a class is defined using the <code class="code custom-cpp"><span class="keyword">struct</span></code> keyword.</p>
<p>The remaining 2 place certain restrictions:</p>
<ul class="simple">
<li><p><code class="code custom-cpp"><span class="keyword">private</span></code> - only class member functions can use affected member</p></li>
<li><p><code class="code custom-cpp"><span class="keyword">protected</span></code> - only class and <em>derived class</em> member functions can use affected member (slightly less restrictive than <code class="code custom-cpp"><span class="keyword">private</span></code>)</p></li>
</ul>
<p>Derived classes will be explained in a later chapter. Up to that point, there will be no visible difference between <code class="code custom-cpp"><span class="keyword">private</span></code> and <code class="code custom-cpp"><span class="keyword">protected</span></code>. Right now we will only focus on public vs private access.</p>
<section id="encapsulation"><h2>Encapsulation</h2>
<p>We have modified the class:</p>
<ul class="simple">
<li><p>member variables are now private</p></li>
<li><p>added a public function to set the values</p></li>
<li><p>added reasonable default initializers (simplest form of a fraction representing 0)</p></li>
</ul>
<table class="codetable"><tbody><tr>
<td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
</pre></div></td>
<td class="code"><pre class="code custom-cpp"><span class="pp-hash">#</span><span class="pp-directive">include</span> <span class="pp-header">&lt;iostream&gt;</span>

<span class="com-single">// (greatest common divisor)</span>
<span class="com-single">// if you have C++17, you can remove this function and use std::gcd from &lt;numeric&gt;</span>
<span class="keyword">int</span> <span class="func">gcd</span>(<span class="keyword">int</span> <span class="param">a</span>, <span class="keyword">int</span> <span class="param">b</span>)
{
	<span class="keyword">if</span> (<span class="param">b</span> == <span class="lit-num">0</span>)
		<span class="keyword">return</span> <span class="param">a</span>;
	<span class="keyword">else</span>
		<span class="keyword">return</span> <span class="func">gcd</span>(<span class="param">b</span>, <span class="param">a</span> % <span class="param">b</span>);
}

<span class="keyword">class</span> <span class="type">fraction</span>
{
<span class="keyword">private</span>:
	<span class="keyword">int</span> <span class="var-local">numerator</span> = <span class="lit-num">0</span>;
	<span class="keyword">int</span> <span class="var-local">denominator</span> = <span class="lit-num">1</span>;

<span class="keyword">public</span>:
	<span class="keyword">void</span> <span class="func">set</span>(<span class="keyword">int</span> <span class="param">count</span>, <span class="keyword">int</span> <span class="param">denom</span>)
	{
		<span class="var-member">numerator</span> = <span class="param">count</span>;

		<span class="keyword">if</span> (<span class="param">denom</span> == <span class="lit-num">0</span>)
			<span class="var-member">denominator</span> = <span class="lit-num">1</span>;
		<span class="keyword">else</span>
			<span class="var-member">denominator</span> = <span class="param">denom</span>;
	}

	<span class="keyword">void</span> <span class="func">simplify</span>()
	{
		<span class="keyword">const</span> <span class="keyword">int</span> <span class="var-local">n</span> = <span class="func">gcd</span>(<span class="var-member">numerator</span>, <span class="var-member">denominator</span>);
		<span class="var-member">numerator</span> /= <span class="var-local">n</span>;
		<span class="var-member">denominator</span> /= <span class="var-local">n</span>;
	}

	<span class="keyword">void</span> <span class="func">print</span>()
	{
		<span class="namespace">std</span>::<span class="var-global">cout</span> <span class="oo">&lt;&lt;</span> <span class="var-member">numerator</span> <span class="oo">&lt;&lt;</span> <span class="lit-str">"/"</span> <span class="oo">&lt;&lt;</span> <span class="var-member">denominator</span> <span class="oo">&lt;&lt;</span> <span class="lit-str">"<span class="esc-seq">\n</span>"</span>;
	}
};

<span class="keyword">int</span> <span class="func">main</span>()
{
	<span class="com-single">// no longer possible</span>
	<span class="com-single">// having private members disables this kind of initialization</span>
	<span class="com-single">// this will be fixed later with constructors</span>
	<span class="com-single">// fraction fr1{2, 6};</span>
	<span class="com-single">// fraction fr2{5, 10};</span>

	<span class="type">fraction</span> <span class="var-local">fr1</span>; <span class="com-single">// will inialize members as specified in class definition</span>
	<span class="var-local">fr1</span>.<span class="func">set</span>(<span class="lit-num">2</span>, <span class="lit-num">6</span>);
	<span class="type">fraction</span> <span class="var-local">fr2</span>;
	<span class="var-local">fr2</span>.<span class="func">set</span>(<span class="lit-num">5</span>, <span class="lit-num">10</span>);

	<span class="com-single">// fr1.denominator = 0; // error: can not access private member</span>

	<span class="var-local">fr1</span>.<span class="func">print</span>();
	<span class="var-local">fr2</span>.<span class="func">print</span>();
	<span class="var-local">fr1</span>.<span class="func">simplify</span>();
	<span class="var-local">fr2</span>.<span class="func">simplify</span>();
	<span class="var-local">fr1</span>.<span class="func">print</span>();
	<span class="var-local">fr2</span>.<span class="func">print</span>();
}
</pre></td>
</tr></tbody></table>
<p>The change has important consequences:</p>
<ul class="simple">
<li><p>Because direct access to member variables is no longer possible and must be done through a public function, the function can verify that passed data is correct. This shields objects from breaking invariants.</p></li>
<li><p>Because the type contains non-public data members, it has stopped being an <em>aggregate</em>. This means that aggregate initialization (which uses <code class="docutils literal">{}</code>) is no longer possible. This is only a temporary problem - in few lessons you will see multiple ways how to initialize class objects.</p></li>
</ul>
<p>At this point we can say we have created a type that has:</p>
<ul class="simple">
<li><p>an interface (public members) - a way to interact with the object from the outside</p></li>
<li><p>an implementation (private members) - details how stuff is done, only to be accessed (indirectly) through the interface</p></li>
</ul>
<p>...and this is the key to write code that cooperates with other projects. If you use someone else's code (e.g. from a library project) methods can be changed (e.g. library update) and code that uses them will also change its behaviour. In this regard methods save us from rewriting the program - all of your code automatically gets indirect update when a library's method implementation is changed. You have already wrote code that relies on it - the C++ standard library also gets updates on its specification and compiler vendors continuously work on improving the code inside.</p>
<aside class="admonition note"><p class="admonition-title">note</p>
<p>Library project interfaces are commonly referred to as <strong>API</strong> (application programming interface). We can say that the website <a class="reference external" href="https://en.cppreference.com/">cppreference</a> documents C++ standard library API.</p>
</aside><aside class="admonition tip"><p class="admonition-title">tip</p>
<p>Generally, for a class that has invariants:</p>
<ul class="simple">
<li><p>All member variables should be <code class="code custom-cpp"><span class="keyword">private</span></code>.</p></li>
<li><p>Functions which are a part of the class interface should be <code class="code custom-cpp"><span class="keyword">public</span></code>.</p></li>
<li><p>Functions which are a part of the implementation (often helper functions to be used inside public functions) should be <code class="code custom-cpp"><span class="keyword">protected</span></code> or <code class="code custom-cpp"><span class="keyword">private</span></code>.</p></li>
</ul></aside><p>In the case of a class representing a fraction, there was no need for private functions but once your classes get bigger, you might need to split/extract some code from public functions to simplify or deduplicate their code. Protected/private functions in such case should be used - they are a detail how interface is realized so they should not be a part of the (public) interface.</p>
<blockquote>
<p>What if there are invariants but only between certain fields? What if other fields have no invariants? Should first group of fields be private and the second group be public?</p>
</blockquote>
<p>Such situation indicates that the class has been badly designed. Very likely, fields with invariants should form a class on their own, and the remaining fields should be added in another class definition through <em>composition</em> or <em>inheritance</em>.</p>
<p>When in doubt, a good default is to make more smaller classes. Such code is more reusable, modular and testable.</p>
</section><section id="more-analogy"><h2>More analogy</h2>
<p>Kitchen (and other household) devices are pretty good examples - they are relatively simple to use but hide complicated mechanisms inside.</p>
<table>
<thead><tr>
<th class="head"><p>device</p></th>
<th class="head"><p>invariant</p></th>
<th class="head"><p>private data</p></th>
<th class="head"><p>private functions</p></th>
<th class="head"><p>public functions (interface)</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>microwave</p></td>
<td><p>no microwaves emitted when opened</p></td>
<td><p>current power, rotating speed</p></td>
<td><p>rotate plate, switch light, emit microwaves</p></td>
<td><p>switch on/off, set time, set power, open, close</p></td>
</tr>
<tr>
<td><p>fridge</p></td>
<td><p>light is off when closed</p></td>
<td><p>compressor state</p></td>
<td><p>switch light, compressing power</p></td>
<td><p>open, close, input item, take item</p></td>
</tr>
<tr>
<td><p>dishwasher</p></td>
<td><p>no water when opened</p></td>
<td><p>available water, current program stage</p></td>
<td><p>enable water pump, rotate nozzles</p></td>
<td><p>switch on/off, set program, open, close</p></td>
</tr>
</tbody>
</table>
<p>Many devices of the same purpose will share the same interface but may be constructed differently. Another great example of an interface is a power socket. Different devices can access the power from the same interface.</p>
<p>Of course you might have a device that does not match the table above - sometimes it can be quite hard to determine what should be a part of (public) interface and what should be controlled internally.</p>
<p>Making <strong>and justifying</strong> decisions is one of programming skills that come with time. Many of OOP design decisions are not always trivial. Some problems take a lot of attempts and experiments to achieve satisfying solution. Remember that <strong>the best way to learn programming is by writing code</strong>. The more problems you encounter and solve, the better.</p>
</section><section id="other-kinds-of-members"><h2>Other kinds of members</h2>
<p>Class members are not only variables and functions. Classes can also contain <em>member types</em>. These can be type aliases or other classes, defined within class body (for nested classes some restrictions apply though).</p>
<!-- TOEXAMPLE mb something with member container_type? -->
</section><section id="order-of-sections"><h2>Order of sections</h2>
<p>There is no required order of sections within a class. You can also repeat access specifier keywords - this is sometimes required if definitions of certain members need at least declarations of other members.</p>
<p>The traditional convention is to list members in this order: <code class="code custom-cpp"><span class="keyword">public</span></code>, <code class="code custom-cpp"><span class="keyword">protected</span></code>, <code class="code custom-cpp"><span class="keyword">private</span></code> though I have seen some people (most notably Howard Hinant) recommending the reverse order. The argument is that for a typical class there are far less private members than public members and seeing private members at first would help understand how the class works and what it represents.</p>
<p>Core Guidelines <a class="reference external" href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Rl-order">recommend traditional order in NL.16</a> though they state <em>This is a recommendation for when you have no constraints or better ideas.</em>.</p>
</section>
</div>
 		<footer class="footer"><div class="footer-item footer-item-container">
				<div class="footer-flex-item">
					<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
						<img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>
					<br>
					All non-code content licensed under <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>, unless stated otherwise.
				</div>
				<div class="footer-flex-item">
					All code content (monospaced font) licensed under <a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">Creative Commons Zero License</a>, unless stated otherwise.
				</div>
			</div>
			<div class="footer-item footer-item-container">
				<div class="footer-flex-item">
					Generated using heavily customized <a href="https://getnikola.com">Nikola</a> static site generator.
				</div>
				<div class="footer-flex-item">
					<a href="https://github.com/Xeverous/the_website">website repository and issue tracker</a>
				</div>
			</div>
		</footer>
</div>
	</div>
</body>
</html>
